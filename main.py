import streamlit as st

st.set_page_config(page_title="MBTI 직업 & 연애 스타일 앱", layout="centered")

mbti_data = {
    "INTJ": {
        "emoji": "🧠",
        "연애스타일": "논리적이고 계획적인 연애. 깊은 대화와 목표 공유를 선호하며 공간을 존중함.",
        "추천직업": "연구원, 전략기획, 소프트웨어 엔지니어, 데이터 과학자",
        "스트레스해결": ["문제의 원인 분석하기", "혼자만의 시간 갖기(책/산책)", "목표 재정리 및 계획 세우기"]
    },
    "INTP": {
        "emoji": "🔍",
        "연애스타일": "아이디어 중심의 대화형 연애. 자유롭고 자율적인 관계를 선호함.",
        "추천직업": "연구자, 프로그래머, UX 리서처, 학술 분야",
        "스트레스해결": ["아이디어 정리(노트)", "취미로 창작 활동하기", "혼자 사색하는 시간 갖기"]
    },
    "ENTJ": {
        "emoji": "🚀",
        "연애스타일": "주도적이고 목표지향적. 파트너와 함께 성장하는 관계를 원함.",
        "추천직업": "경영자, 프로젝트 매니저, 변호사, 컨설턴트",
        "스트레스해결": ["우선순위 재정립", "운동으로 에너지 발산", "실행 가능한 계획 세우기"]
    },
    "ENTP": {
        "emoji": "💡",
        "연애스타일": "재미와 자극을 중시. 토론과 도전적인 대화를 즐김.",
        "추천직업": "창업가, 마케터, 기획자, 크리에이터",
        "스트레스해결": ["아이디어 브레인스토밍", "새로운 활동 시도", "유머로 분위기 전환"]
    },
    "INFJ": {
        "emoji": "🌙",
        "연애스타일": "깊고 의미 있는 연결 추구. 감정의 이해와 신뢰를 중요시함.",
        "추천직업": "상담사, 작가, 교육자, 사회복지사",
        "스트레스해결": ["감정 일기 쓰기", "신뢰하는 사람과 대화", "휴식과 자연 속 시간 갖기"]
    },
    "INFP": {
        "emoji": "🎨",
        "연애스타일": "이상주의적이고 로맨틱. 진심과 가치 공유를 중요하게 여김.",
        "추천직업": "작가, 디자이너, 아티스트, 편집자",
        "스트레스해결": ["창작 활동으로 감정 표출", "감정 정리(음악/독서)", "조용한 휴식"]
    },
    "ENFJ": {
        "emoji": "🤝",
        "연애스타일": "사람 중심의 헌신적 파트너. 서로를 성장시키는 관계 지향.",
        "추천직업": "교사, HR, 리더십 코치, 커뮤니티 매니저",
        "스트레스해결": ["신뢰하는 사람과 솔직한 대화", "봉사/타인 도움으로 만족감 얻기", "휴식으로 재충전"]
    },
    "ENFP": {
        "emoji": "🌈",
        "연애스타일": "열정적이고 개방적. 새로운 경험과 감정표현을 즐김.",
        "추천직업": "컨텐츠 크리에이터, 마케터, 배우, 이벤트 플래너",
        "스트레스해결": ["새로운 취미 시도", "친구들과 에너지 교환", "자유로운 표현(글/음악)"]
    },
    "ISTJ": {
        "emoji": "🗂️",
        "연애스타일": "신중하고 안정적인 연애. 책임감 있고 신뢰를 중시함.",
        "추천직업": "회계사, 공무원, 시스템 관리자, 품질관리",
        "스트레스해결": ["루틴으로 안정 찾기", "체계적으로 문제 정리", "충분한 수면과 규칙적 운동"]
    },
    "ISFJ": {
        "emoji": "🛡️",
        "연애스타일": "헌신적이고 배려심 많은 파트너. 작은 배려로 사랑 표현.",
        "추천직업": "간호사, 교사, 상담원, 행정 업무",
        "스트레스해결": ["돌봄 받기(친한 사람과 시간)", "작은 일상 루틴 유지", "편안한 환경 조성"]
    },
    "ESTJ": {
        "emoji": "🧭",
        "연애스타일": "실용적이고 책임감 있는 연애. 명확한 규칙과 역할을 선호.",
        "추천직업": "관리자, 군인, 운영 담당, 법률 관련",
        "스트레스해결": ["실행 가능한 해결책 세우기", "운동으로 스트레스 해소", "목표 재설정"]
    },
    "ESFJ": {
        "emoji": "🎀",
        "연애스타열": "따뜻하고 세심한 연애(오타 주의: '연애스타일' 사용 권장)",  # 내부용 오타 표시 가능
        "연애스타일": "따뜻하고 세심한 연애. 파트너의 필요를 잘 챙기며 안정감을 줌.",
        "추천직업": "간호, 교육, 고객 서비스, 이벤트 코디네이터",
        "스트레스해결": ["사교적 활동으로 위로받기", "친구/가족과 시간 보내기", "정리로 마음 안정"]
    },
    "ISTP": {
        "emoji": "🔧",
        "연애스타일": "실용적이고 즉흥적인 연애. 함께 활동하며 유대감 형성.",
        "추천직업": "엔지니어, 기술자, 파일럿, 정비사",
        "스트레스해결": ["손으로 하는 활동(수리/공예)", "짧은 혼자만의 시간", "신체활동으로 에너지 소진"]
    },
    "ISFP": {
        "emoji": "🌿",
        "연애스타일": "감성적이고 현재를 즐기는 연애. 조용한 배려와 표현으로 사랑함.",
        "추천직업": "디자이너, 음악가, 요리사, 사진작가",
        "스트레스해결": ["예술적 표현(그림/음악)", "자연에서 휴식", "감정 정리(일기)"]
    },
    "ESTP": {
        "emoji": "⚡",
        "연애스타일": "활동적이고 즉흥적인 연애. 스릴과 재미를 중시함.",
        "추천직업": "세일즈, 이벤트 운영, 스포츠 관련, 응급구조",
        "스트레스해결": ["강도 높은 운동", "즉각적 행동으로 해결", "친구들과 활발한 교류"]
    },
    "ESFP": {
        "emoji": "🎉",
        "연애스타일": "사교적이고 즐거움을 추구하는 연애. 표현이 풍부하고 낭만적임.",
        "추천직업": "퍼포머, 호스피탈리티, 마케팅, 이벤트 플래너",
        "스트레스해결": ["파티나 모임으로 기분 전환", "창의적 표현", "즉흥적인 여행이나 활동"]
    }
}

# UI
st.title("MBTI 16종류 — 특징/연애/직업/스트레스")
st.caption("MBTI 유형을 선택하면 이모지와 함께 카테고리별 정보를 보여줌")

mbti_list = list(mbti_data.keys())
selected = st.selectbox("MBTI 유형 선택", mbti_list, format_func=lambda x: f"{mbti_data[x]['emoji']}  {x}")

category = st.radio("카테고리 선택", ("연애스타일", "추천직업", "스트레스 해결법"))

data = mbti_data[selected]

st.markdown(f"## {data['emoji']}  {selected}")

if category == "연애스타일":
    st.write(data["연애스타일"])
elif category == "추천직업":
    st.write(data["추천직업"])
else:
    st.write("스트레스 받을 때 해결법:")
    for i, item in enumerate(data["스트레스해결"], 1):
        st.write(f"{i}. {item}")

# 추가: 전체 유형 목록 보기
with st.expander("모든 유형 간단보기"):
    cols = st.columns(4)
    for idx, key in enumerate(mbti_list):
        col = cols[idx % 4]
        col.markdown(f"**{mbti_data[key]['emoji']} {key}**")
        col.write(mbti_data[key]["연애스타일"][:50] + "...")
